<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css"/>
    <script src="../JS/axios.min.js"></script>
    <script src="../JS/vue.min.js"></script>
    <link href="../css/bootstrap.css" rel="stylesheet" />
<!--    <script src="../JS/vue.js"></script>-->
    <title></title>
    <style>
        .el-table{
    margin-left:20px;
    margin-top:10px;
    border:1px solid black;
     float:left; 
     height:150px; 
     width:300px; 
     border-radius: 4px;
   
    }
            .el-table:hover {
                  box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.1);
            }
        p {
           text-align:center;
           padding:0px;
           margin-top:30px
        }
    </style>
    
</head>
<body>
    <div id="app">
        <button class="el-table" slot="reference"  v-for="good in getInvestorsInfo">
            <a href="#" class="el-icon-delete" style="float:right;" v-on:click="deleteWithshop(good.BuyID)"></a>
            
         <p>{{good.BuyerName}}</p>
            <p>{{good.HZTime | CCC }}</p>
    </button>
        <button class="el-table" v-on:click="AddData">
            <span class="el-icon-plus">
        </button>
    </div>
    
  
    <script>
        Vue.filter("CCC",function(time){
           
            return  time.replace(time.split('T')[1],"").replace('T',"");
                
        })
       new Vue({
           el: "#app",
           data: {
               getInvestorsInfo:[],
               geturl:"../ashx/GetWithShop.ashx",
               Deleteurl:"../ashx/DeleteWithShop.ashx",
               form: {
                   inerstor: ''
               }
           },
           created: function(){
               this.InitData();

           },
           mounted: function () {

           },
           methods: {
               InitData: function () {
                   //ajax
                   axios.get(this.geturl).then(
                      //请求服务器成功的回调函数
                      result=>{this.getInvestorsInfo = result.data},
                      ).catch(
                     //请求服务器异常的回调函数
                      error=>{console.log(error)}
                      );

               }, 
               AddData:function(){
                   location.href="InsertWithShop.html";
               },
               deleteWithshop:function(id){
                   axios.get(
                          this.Deleteurl,
                          {
                              params:{ids:id},
                             
                          }).then(
                                     function(res){if(res.data=="ok"){
                                         location.href="WithShop.html";
                                         
                                     }}
                                     ).catch(
                                         err=>{console.log(err)}
                                     );
               },

        }
       });
    </script>
</body>
</html>
